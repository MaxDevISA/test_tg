<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0">
    <title>P2P –ö—Ä–∏–ø—Ç–æ –ë–∏—Ä–∂–∞</title>
    <link rel="stylesheet" href="/static/style.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
    <div class="header">
        <h1>ISA P2P</h1>
        <div class="user-info">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
    </div>

    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <div class="navigation">
        <button class="nav-item active" data-view="orders">üìã –†—ã–Ω–æ–∫</button>
        <button class="nav-item" data-view="my-orders">üìù –ú–æ–∏ –∑–∞—è–≤–∫–∏</button>
        <button class="nav-item" data-view="responses">üì® –û—Ç–∫–ª–∏–∫–∏</button>
        <button class="nav-item" data-view="profile">üë§ –ü—Ä–æ—Ñ–∏–ª—å</button>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <div class="container">
        
        <!-- –†–∞–∑–¥–µ–ª "–í—Å–µ –∑–∞—è–≤–∫–∏" -->
        <div id="ordersView" class="view">
            <div class="filters">
                <div class="filter-row">
                    <select class="form-select filter-select" data-filter="type">
                        <option value="">–í—Å–µ —Ç–∏–ø—ã</option>
                        <option value="buy">–ü–æ–∫—É–ø–∫–∞</option>
                        <option value="sell">–ü—Ä–æ–¥–∞–∂–∞</option>
                    </select>
                    
                    <select class="form-select filter-select" data-filter="cryptocurrency">
                        <option value="">–í—Å–µ –º–æ–Ω–µ—Ç—ã</option>
                        <option value="BTC">Bitcoin (BTC)</option>
                        <option value="ETH">Ethereum (ETH)</option>
                        <option value="USDT">Tether (USDT)</option>
                        <option value="USDC">USD Coin (USDC)</option>
                    </select>
                </div>
                
                <button class="btn btn-primary" id="createOrderBtn">+ –°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É</button>
            </div>
            
            <div id="ordersContent">
                <div class="loading">
                    <div class="spinner"></div>
                </div>
            </div>
        </div>

        <!-- –†–∞–∑–¥–µ–ª "–ú–æ–∏ –∑–∞—è–≤–∫–∏" -->
        <div id="my-ordersView" class="view hidden">
            <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω —á–µ—Ä–µ–∑ JavaScript -->
        </div>

        <!-- –†–∞–∑–¥–µ–ª "–û—Ç–∫–ª–∏–∫–∏" -->
        <div id="responsesView" class="view hidden">
            <div class="response-tabs">
                <button class="response-tab active" data-tab="my-responses">
                    <span class="tab-icon">üì§</span>
                    <span class="tab-text">–ú–æ–∏ –æ—Ç–∫–ª–∏–∫–∏</span>
                </button>
                <button class="response-tab" data-tab="responses-to-my">
                    <span class="tab-icon">üì•</span>
                    <span class="tab-text">–ù–∞ –º–æ–∏ –∑–∞—è–≤–∫–∏</span>
                </button>
                <button class="response-tab" data-tab="active-deals">
                    <span class="tab-icon">üí∞</span>
                    <span class="tab-text">–°–¥–µ–ª–∫–∏</span>
                </button>
            </div>

            <div class="response-content">
                <!-- –ú–æ–∏ –æ—Ç–∫–ª–∏–∫–∏ -->
                <div id="my-responses-content" class="response-tab-content active">
                    <div class="section-header">
                        <h2>üì§ –ú–æ–∏ –æ—Ç–∫–ª–∏–∫–∏</h2>
                        <p class="section-description">–û—Ç–∫–ª–∏–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –æ—Å—Ç–∞–≤–ª—è–ª–∏ –Ω–∞ –∑–∞—è–≤–∫–∏ –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</p>
                    </div>
                    <div id="myResponsesList">
                        <div class="loading">
                            <div class="spinner"></div>
                        </div>
                    </div>
                </div>

                <!-- –û—Ç–∫–ª–∏–∫–∏ –Ω–∞ –º–æ–∏ –∑–∞—è–≤–∫–∏ -->
                <div id="responses-to-my-content" class="response-tab-content">
                    <div class="section-header">
                        <h2>üì• –û—Ç–∫–ª–∏–∫–∏ –Ω–∞ –º–æ–∏ –∑–∞—è–≤–∫–∏</h2>
                        <p class="section-description">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ö–æ—Ç—è—Ç —Ç–æ—Ä–≥–æ–≤–∞—Ç—å —Å –≤–∞–º–∏</p>
                    </div>
                    <div id="responsesToMyList">
                        <div class="loading">
                            <div class="spinner"></div>
                        </div>
                    </div>
                </div>

                <!-- –ê–∫—Ç–∏–≤–Ω—ã–µ —Å–¥–µ–ª–∫–∏ -->
                <div id="active-deals-content" class="response-tab-content">
                    <div class="section-header">
                        <h2>üí∞ –°–¥–µ–ª–∫–∏</h2>
                        <p class="section-description">–¢—É—Ç –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤–∞—à–∏ —Å–¥–µ–ª–∫–∏ –∏ –∏—Ö —Å—Ç–∞—Ç—É—Å—ã</p>
                    </div>
                    <div id="activeDealsList">
                        <div class="loading">
                            <div class="spinner"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –†–∞–∑–¥–µ–ª "–ü—Ä–æ—Ñ–∏–ª—å" -->
        <div id="profileView" class="view hidden">
            <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω —á–µ—Ä–µ–∑ JavaScript -->
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞—è–≤–∫–∏ -->
    <div id="createOrderModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">–°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É</h3>
                <button class="modal-close">&times;</button>
            </div>
            
            <div class="modal-body">
                <form id="createOrderForm">
                <div class="form-group">
                    <label class="form-label">–¢–∏–ø –æ–ø–µ—Ä–∞—Ü–∏–∏</label>
                    <select class="form-select" name="type" required>
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø</option>
                        <option value="buy">–ü–æ–∫—É–ø–∫–∞</option>
                        <option value="sell">–ü—Ä–æ–¥–∞–∂–∞</option>
                    </select>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">–ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞</label>
                        <select class="form-select" name="cryptocurrency" required>
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –º–æ–Ω–µ—Ç—É</option>
                            <option value="BTC">Bitcoin (BTC)</option>
                            <option value="ETH">Ethereum (ETH)</option>
                            <option value="USDT">Tether (USDT)</option>
                            <option value="USDC">USD Coin (USDC)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">–í–∞–ª—é—Ç–∞</label>
                        <select class="form-select" name="fiat_currency" required>
                            <option value="RUB">–†—É–±–ª–∏ (RUB)</option>
                            <option value="USD">–î–æ–ª–ª–∞—Ä—ã (USD)</option>
                            <option value="EUR">–ï–≤—Ä–æ (EUR)</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</label>
                        <input type="number" class="form-input" name="amount" step="0.00000001" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">–¶–µ–Ω–∞</label>
                        <input type="number" class="form-input" name="price" step="0.01" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">–°–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã</label>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                        <label><input type="checkbox" name="payment_methods" value="sberbank"> –°–ë–ï–†</label>
                        <label><input type="checkbox" name="payment_methods" value="tinkoff"> –¢–∏–Ω—å–∫–æ—Ñ—Ñ</label>
                        <label><input type="checkbox" name="payment_methods" value="SPB"> –°–ü–ë</label>
                        <label><input type="checkbox" name="payment_methods" value="yandex_money"> –ÆMoney</label>
                        <label><input type="checkbox" name="payment_methods" value="bank_transfer"> –ü–æ ‚Ññ –∫–∞—Ä—Ç—ã</label>
                        <label><input type="checkbox" name="payment_methods" value="cash"> –ù–∞–ª–∏—á–Ω—ã–µ</label>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">–û–ø–∏—Å–∞–Ω–∏–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                    <textarea class="form-textarea" name="description" rows="3" maxlength="200"></textarea>
                </div>
                
                <!-- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–∫–ª—é—á–µ–Ω–æ –≤ –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–µ –æ—Ç–∫–ª–∏–∫–æ–≤ -->
                
                <button type="submit" class="btn btn-primary">–°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É</button>
            </form>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –æ—Ç–∑—ã–≤–∞ -->
    <div id="reviewModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">‚≠ê –û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤</h3>
                <button class="modal-close" onclick="closeReviewModal()">&times;</button>
            </div>
            
            <div class="modal-body">
                <form id="reviewForm">
                    <!-- –°–∫—Ä—ã—Ç—ã–µ –ø–æ–ª—è –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö -->
                    <input type="hidden" id="reviewDealId" name="deal_id">
                    <input type="hidden" id="reviewToUserId" name="to_user_id">
                    
                    <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–µ -->
                    <div style="background: var(--tg-theme-secondary-bg-color, #f8fafc); border-radius: 8px; padding: 12px; margin-bottom: 16px;">
                        <div style="font-size: 12px; color: var(--tg-theme-hint-color, #708499); margin-bottom: 4px;">–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç:</div>
                        <div id="reviewCounterpartyName" style="font-weight: 600;"></div>
                    </div>
                    
                    <!-- –†–µ–π—Ç–∏–Ω–≥ –∑–≤–µ–∑–¥–∞–º–∏ -->
                    <div class="form-group">
                        <label class="form-label">–û—Ü–µ–Ω–∫–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                        <div class="star-rating" id="starRating">
                            <span class="star" data-rating="1">‚≠ê</span>
                            <span class="star" data-rating="2">‚≠ê</span>
                            <span class="star" data-rating="3">‚≠ê</span>
                            <span class="star" data-rating="4">‚≠ê</span>
                            <span class="star" data-rating="5">‚≠ê</span>
                        </div>
                        <div id="ratingValue" style="margin-top: 8px; font-size: 14px; color: var(--tg-theme-hint-color, #708499);">
                            –í—ã–±–µ—Ä–∏—Ç–µ –æ—Ü–µ–Ω–∫—É –æ—Ç 1 –¥–æ 5 –∑–≤–µ–∑–¥
                        </div>
                        <input type="hidden" id="reviewRating" name="rating" required>
                    </div>
                    
                    <!-- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π -->
                    <div class="form-group">
                        <label class="form-label">–û—Ç–∑—ã–≤ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                        <textarea class="form-textarea" id="reviewComment" name="comment" 
                                  rows="4" maxlength="500" 
                                  placeholder="–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ –≤–∞—à–µ–º –æ–ø—ã—Ç–µ —Å–¥–µ–ª–∫–∏..."></textarea>
                        <div style="font-size: 12px; color: var(--tg-theme-hint-color, #708499); margin-top: 4px;">
                            –ú–∞–∫—Å–∏–º—É–º 500 —Å–∏–º–≤–æ–ª–æ–≤
                        </div>
                    </div>
                    
                    <!-- –ê–Ω–æ–Ω–∏–º–Ω–æ—Å—Ç—å -->
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="reviewAnonymous" name="is_anonymous">
                            <span class="checkmark"></span>
                            –ê–Ω–æ–Ω–∏–º–Ω—ã–π –æ—Ç–∑—ã–≤
                        </label>
                        <div style="font-size: 12px; color: var(--tg-theme-hint-color, #708499); margin-top: 4px;">
                            –í–∞—à–µ –∏–º—è –Ω–µ –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤ –æ—Ç–∑—ã–≤–µ
                        </div>
                    </div>
                    
                    <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
                    <div style="display: flex; gap: 12px; margin-top: 24px;">
                        <button type="button" class="btn btn-secondary" onclick="closeReviewModal()" style="flex: 1;">
                            –û—Ç–º–µ–Ω–∏—Ç—å
                        </button>
                        <button type="submit" class="btn btn-primary" style="flex: 1;">
                            ‚≠ê –û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>
